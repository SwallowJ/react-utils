!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("chokidar"),require("@swallowj/logjs")):"function"==typeof define&&define.amd?define(["chokidar","@swallowj/logjs"],t):"object"==typeof exports?exports["react-utils-script"]=t(require("chokidar"),require("@swallowj/logjs")):e["react-utils-script"]=t(e.chokidar,e["@swallowj/logjs"])}(global,(function(e,t){return(()=>{"use strict";var r={460:e=>{e.exports=t},677:t=>{t.exports=e}},o={};function s(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return r[e](n,n.exports,s),n.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{s.r(n);var e=s(677),t=s.n(e);const r=require("fs");var o=s.n(r);const l=/(namespace)(\S|\s)*(state:)(\S|\s)*(effects:)(\S|\s)*(reducers:)(\S|\s)*(export default).*/,a=e=>{const t=o().readFileSync(e,{encoding:"utf8"});return l.test(t)},i=require("path");var c=s.n(i),u=s(460),d=s.n(u);const p=require("crypto");var f=s.n(p);const m=new Map;let g="",y=[],h=[];const j=d().New({name:"model.listener"}),x=function(e,t=1e3){let r;return(...o)=>{r&&clearTimeout(r),r=setTimeout((()=>{e(...o)}),t)}}((()=>{y.length===h.length&&y.every((e=>h.includes(e)))||(((e,t)=>{const o=(e=>(r.rmSync(e,{force:!0,maxRetries:3}),r.mkdirSync(i.dirname(e),{recursive:!0}),r.createWriteStream(e)))(e);t.forEach((e=>{const t=e.replace(/\.[jt]sx?$/,"");o.write(`export { default as ${(e=>{let t=m.get(e);t||(t=f().createHash("sha256").update(e).copy().digest("hex").slice(0,8),m.set(e,t));let r="";for(const t of e.split(c().sep).reverse())if("model"!==t){r=t.replace(/\s/g,"_");break}return`${r}_${t}`})(t)} } from "${t}";\n`)})),o.close()})(g,y),h=[...y],j.Debug("Model 更新完成"))}),2e3);let v=[],w=null;const b=(e,r)=>{t().watch(e,{ignoreInitial:!0,ignored:e=>!!/.*\.\w+$/.test(e)&&!(r??/\.[tj]sx?/).test(e)}).on("add",(e=>{a(e)&&(y.push(e),x())})).on("unlink",(e=>{y=y.filter((t=>t!==e)),x()})).on("change",(e=>{(e=>{v.push(e),w&&clearTimeout(w),w=setTimeout((()=>{[...new Set(v)].forEach((e=>{y.includes(e)&&!a(e)?y=y.filter((t=>t!==e)):!y.includes(e)&&a(e)&&y.push(e)})),x(),w&&clearTimeout(w),w=null,v.length=0}),3e3)})(e)}))};process.on("message",(({pages:e,customes:t,output:r,initArry:o})=>{j.Info("model监听进程已启动"),g=r??"",y=[...o],h=[...o],e&&b(e,/.*\/model\.[jt]sx?$/),t&&b(t)}))})(),n})()}));