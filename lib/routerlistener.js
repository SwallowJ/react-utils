!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("chokidar")):"function"==typeof define&&define.amd?define(["chokidar"],r):"object"==typeof exports?exports["react-utils-script"]=r(require("chokidar")):e["react-utils-script"]=r(e.chokidar)}(global,(function(e){return(()=>{"use strict";var r,t={177:(e,r,t)=>{t.r(r);var o=t(677),n=t.n(o);const i=require("path");var c=t.n(i);const a=require("fs"),s=e=>Object.prototype.toString.call(e),u=e=>{const{obj1:r,obj2:t,deep:o,sort:n=!0}=e;if(void 0===r||void 0===t||null===r||null===t)return r===t;const i=s(r);if(i!==s(t))return!1;switch(i){case"[object Object]":const i=Object.keys(r),c=Object.keys(t);return i.length==c.length&&i.every((o=>u({...e,obj1:r[o],obj2:t[o]})));case"[object Array]":const a=r,s=t;return a.length===s.length&&(n&&(a.sort(),s.sort()),a.every(((r,t)=>u({...e,obj1:s[t],obj2:r}))));default:return o?JSON.stringify(r)===JSON.stringify(t):r===t}},l=(e,r,t)=>{const o=new Array(t).fill("\t").join(""),n=new Array(t+1).fill("\t").join("");switch(Object.prototype.toString.call(e)){case"[object String]":return void r?.write(`"${e}",`);case"[object Object]":return r?.write("{\n"),Object.entries(e).forEach((([e,o])=>{r?.write(`${n}${e}: `),l(o,r,t+2)})),void r?.write(`\n${o}},`);case"[object Array]":return r?.write("["),e.forEach((e=>{l(e,r,t+2)})),void r?.write("],");default:return void r?.write(`${e},`)}},d=(e,r,t,o=1,n="/")=>{const i=new Array(o).fill("\t").join(""),a=new Array(o+1).fill("\t").join("");e.forEach((e=>{const s=c().resolve(n,e.path.replace(/^\//,""));r.write(`${i}{\n`),Object.entries(e).forEach((([e,n])=>{switch(e){case"routers":return r.write(`${a}${e}: [\n`),d(n,r,t,o+2,s),void r.write(`${a}],\n`);case"component":return void(t?r.write(`${a}${e}: loadable(() => import("${n}"), options),\n`):r.write(`${a}${e}: require("${n}").default,\n`));case"data":return r.write(`${a}${e}: `),l(n,r,o+1),void r.write("\n");case"exact":return void r.write(`${a}${e}: ${n},\n`);case"redirect":default:return void r.write(`${a}${e}: "${n}",\n`);case"path":return void r.write(`${a}${e}: "${s}",\n`)}})),r?.write(`${i}},\n`)}))};let f,p=[];const b=function(e,r=1e3){let t;return(...o)=>{t&&clearTimeout(t),t=setTimeout((()=>{e(...o)}),r)}}((e=>{t.e(786).then(t.bind(t,786)).then((r=>{const t=r.default(e);u({obj1:p,obj2:t})||((e=>{const{output:r,split:t=!0,loadComponent:o,routers:n}=e;if(t&&!o)throw new Error("loadComponent 不能为空");const c=(s=r,a.rmSync(s,{force:!0,maxRetries:3}),a.mkdirSync(i.dirname(s),{recursive:!0}),a.createWriteStream(s));var s;t&&(c.write('import React from "react";\n'),c.write('import loadable from "@loadable/component";\n'),c.write(`import Loading from "${o}";\n\n`),c.write("const options = {\n\tfallback: <Loading />,\n};\n\n")),c.write("const routers: Aplication.router[] = [\n"),d(n,c,t),c.write("];\n\nexport default routers;\n"),c.close()})({...f,routers:t}),p=t)}))}),2e3);process.on("message",(e=>{const{routers:r,routerPath:t}=e;p=r,f=e,(e=>{n().watch(e,{ignoreInitial:!0}).on("change",b)})(t)}))},677:r=>{r.exports=e}},o={};function n(e){var r=o[e];if(void 0!==r)return r.exports;var i=o[e]={id:e,loaded:!1,exports:{}};return t[e](i,i.exports,n),i.loaded=!0,i.exports}return n.m=t,n.c=o,n.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return n.d(r,{a:r}),r},n.d=(e,r)=>{for(var t in r)n.o(r,t)&&!n.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((r,t)=>(n.f[t](e,r),r)),[])),n.u=e=>"dynamicImport.js",n.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r={179:1},n.f.require=(e,t)=>{r[e]||(e=>{var t=e.modules,o=e.ids,i=e.runtime;for(var c in t)n.o(t,c)&&(n.m[c]=t[c]);i&&i(n);for(var a=0;a<o.length;a++)r[o[a]]=1})(require("./"+n.u(e)))},n(177)})()}));