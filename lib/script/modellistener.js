!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("chokidar"),require("dayjs"),require("@swallowj/logjs")):"function"==typeof define&&define.amd?define(["chokidar","dayjs","@swallowj/logjs"],t):"object"==typeof exports?exports["react-utils-script"]=t(require("chokidar"),require("dayjs"),require("@swallowj/logjs")):e["react-utils-script"]=t(e.chokidar,e.dayjs,e["@swallowj/logjs"])}(global,(function(e,t,r){return(()=>{"use strict";var o={460:e=>{e.exports=r},677:t=>{t.exports=e},760:e=>{e.exports=t}},s={};function n(e){var t=s[e];if(void 0!==t)return t.exports;var r=s[e]={exports:{}};return o[e](r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};return(()=>{n.r(a);var e=n(677),t=n.n(e);const r=require("fs");var o=n.n(r);const s=/(namespace)(\S|\s)*(state:)(\S|\s)*(effects:)(\S|\s)*(reducers:)(\S|\s)*(export default).*/,l=e=>{const t=o().readFileSync(e,{encoding:"utf8"});return s.test(t)};n(760);const i=require("path");var c=n.n(i),u=n(460),d=n.n(u);const p=require("crypto");var f=n.n(p);const m=new Map;let y="",g=[],j=[];const h=d().New({name:"model.listener"}),x=function(e,t=1e3){let r;return(...o)=>{r&&clearTimeout(r),r=setTimeout((()=>{e(...o)}),t)}}((()=>{g.length===j.length&&g.every((e=>j.includes(e)))||(((e,t)=>{const o=(e=>(r.rmSync(e,{force:!0,maxRetries:3}),r.mkdirSync(i.dirname(e),{recursive:!0}),r.createWriteStream(e)))(e);t.forEach((e=>{const t=e.replace(/\.[jt]sx?$/,"");o.write(`export { default as ${(e=>{let t=m.get(e);t||(t=f().createHash("sha256").update(e).copy().digest("hex").slice(0,8),m.set(e,t));let r="";for(const t of e.split(c().sep).reverse())if("model"!==t){r=t.replace(/\s/g,"_");break}return`${r}_${t}`})(t)} } from "${t}";\n`)})),o.close()})(y,g),j=[...g],h.Debug("Model 更新完成"))}),2e3);let v=[],w=null;const b=(e,r)=>{t().watch(e,{ignoreInitial:!0,ignored:e=>!!/.*\.\w+$/.test(e)&&!(r??/\.[tj]sx?/).test(e)}).on("add",(e=>{l(e)&&(g.push(e),x())})).on("unlink",(e=>{g=g.filter((t=>t!==e)),x()})).on("change",(e=>{(e=>{v.push(e),w&&clearTimeout(w),w=setTimeout((()=>{[...new Set(v)].forEach((e=>{g.includes(e)&&!l(e)?g=g.filter((t=>t!==e)):!g.includes(e)&&l(e)&&g.push(e)})),x(),w&&clearTimeout(w),w=null,v.length=0}),5e3)})(e)}))};process.on("message",(({pages:e,customes:t,output:r,initArry:o})=>{h.Info("model监听进程已启动"),y=r??"",g=[...o],j=[...o],e&&b(e,/.*\/model\.[jt]sx?$/),t&&b(t)}))})(),a})()}));