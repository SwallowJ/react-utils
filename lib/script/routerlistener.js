!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("chokidar"),require("dayjs")):"function"==typeof define&&define.amd?define(["chokidar","dayjs"],t):"object"==typeof exports?exports["react-utils-script"]=t(require("chokidar"),require("dayjs")):e["react-utils-script"]=t(e.chokidar,e.dayjs)}(global,(function(e,t){return(()=>{var r={177:(e,t,r)=>{"use strict";r.r(t);var o=r(677),n=r.n(o);const i=require("path");var c=r.n(i);r(760);const a=require("fs"),s=e=>Object.prototype.toString.call(e),u=e=>{const{obj1:t,obj2:r,deep:o,sort:n=!0}=e;if(void 0===t||void 0===r||null===t||null===r)return t===r;const i=s(t);if(i!==s(r))return!1;switch(i){case"[object Object]":const i=Object.keys(t),c=Object.keys(r);return i.length==c.length&&i.every((o=>u({...e,obj1:t[o],obj2:r[o]})));case"[object Array]":const a=t,s=r;return a.length===s.length&&(n&&(a.sort(),s.sort()),a.every(((t,r)=>u({...e,obj1:s[r],obj2:t}))));default:return o?JSON.stringify(t)===JSON.stringify(r):t===r}},l=(e,t,r)=>{const o=new Array(r).fill("\t").join(""),n=new Array(r+1).fill("\t").join("");switch(Object.prototype.toString.call(e)){case"[object String]":return void t?.write(`"${e}",`);case"[object Object]":return t?.write("{\n"),Object.entries(e).forEach((([e,o])=>{t?.write(`${n}${e}: `),l(o,t,r+2)})),void t?.write(`\n${o}},`);case"[object Array]":return t?.write("["),e.forEach((e=>{l(e,t,r+2)})),void t?.write("],");default:return void t?.write(`${e},`)}},d=(e,t,r,o=1,n="/")=>{const i=new Array(o).fill("\t").join(""),a=new Array(o+1).fill("\t").join("");e.forEach((e=>{const s=c().resolve(n,e.path.replace(/^\//,""));t.write(`${i}{\n`),Object.entries(e).forEach((([e,n])=>{switch(e){case"routers":return t.write(`${a}${e}: [\n`),d(n,t,r,o+2,s),void t.write(`${a}],\n`);case"component":return void(r?t.write(`${a}${e}: loadable(() => import("${n}"), options),\n`):t.write(`${a}${e}: require("${n}").default,\n`));case"data":return t.write(`${a}${e}: `),l(n,t,o+1),void t.write("\n");case"exact":return void t.write(`${a}${e}: ${n},\n`);case"redirect":default:return void t.write(`${a}${e}: "${n}",\n`);case"path":return void t.write(`${a}${e}: "${s}",\n`)}})),t?.write(`${i}},\n`)}))};let p,f=[];const b=function(e,t=1e3){let r;return(...o)=>{r&&clearTimeout(r),r=setTimeout((()=>{e(...o)}),t)}}((e=>{delete r.c[e];const t=r(822)(e).default;u({obj1:f,obj2:t})||((e=>{const{output:t,split:r=!0,loadComponent:o,routers:n}=e;if(r&&!o)throw new Error("loadComponent 不能为空");const c=(s=t,a.rmSync(s,{force:!0,maxRetries:3}),a.mkdirSync(i.dirname(s),{recursive:!0}),a.createWriteStream(s));var s;r&&(c.write('import React from "react";\n'),c.write('import loadable from "@loadable/component";\n'),c.write(`import Loading from "${o}";\n\n`),c.write("const options = {\n\tfallback: <Loading />,\n};\n\n")),c.write("const routers: Aplication.router[] = [\n"),d(n,c,r),c.write("];\n\nexport default routers;\n"),c.close()})({...p,routers:t}),f=t)}),2e3);process.on("message",(e=>{const{routers:t,routerPath:r}=e;f=t,p=e,(e=>{n().watch(e,{ignoreInitial:!0}).on("change",b)})(r)}))},822:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=822,e.exports=t},677:t=>{"use strict";t.exports=e},760:e=>{"use strict";e.exports=t}},o={};function n(e){var t=o[e];if(void 0!==t)return t.exports;var i=o[e]={id:e,loaded:!1,exports:{}};return r[e](i,i.exports,n),i.loaded=!0,i.exports}return n.c=o,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(177)})()}));